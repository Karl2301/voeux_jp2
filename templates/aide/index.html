<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voeux JP2</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <!-- ======= Styles ====== -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/aide/aide.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/settings/style_dark.css') }}">
</head>

<body>

    <div class="container">
        <!-- =============== Navigation ================ -->
        <div class="navigation">
            <ul>
                <li>
                    <a href="#">
                        <span class="icon">
                            <img class="logo" width="60px" height="60px" src="{{ url_for('static', filename='img/logo_jp2.png') }}" style="margin-right: 10px; filter: brightness(0) invert(1);">
                        </span>
                        <span class="title">Vœux Jean-Paul II</span>
                    </a>
                </li>

                <li>
                    <a href="/dashboard">
                        <span class="icon">
                            <ion-icon name="home-outline"></ion-icon>
                        </span>
                        <span class="title">Tableau de Bord</span>
                    </a>
                </li>

                <li id="eleves_nav" style="display: none;">
                    <a href="#">
                        <span class="icon">
                            <ion-icon name="people-outline"></ion-icon>
                        </span>
                        <span class="title">Élèves</span>
                    </a>
                </li>

                <li id="notification_nav" style="display: none;">
                    <a href="/notifications">
                        <span class="icon">
                            <ion-icon name="chatbubble-outline"></ion-icon>
                        </span>
                        <span class="title">Notifications</span>
                    </a>
                </li>

                <li>
                    <a href="/aide">
                        <span class="icon">
                            <ion-icon name="help-outline"></ion-icon>
                        </span>
                        <span class="title">Aide</span>
                    </a>
                </li>

                <li>
                    <a href="/settings">
                        <span class="icon">
                            <ion-icon name="settings-outline"></ion-icon>
                        </span>
                        <span class="title">Paramètres</span>
                    </a>
                </li>



                <li>
                    <a href="/logout">
                        <span class="icon">
                            <ion-icon name="log-out-outline"></ion-icon>
                        </span>
                        <span class="title">Déconnexion</span>
                    </a>
                </li>
            </ul>
        </div>
        <div class="main">
            <div class="topbar">
                <div class="toggle">
                    <ion-icon name="menu-outline"></ion-icon>
                </div>
                <div class="search">
                    <label>
                        <input type="text" placeholder="Rechercher ici">
                        <ion-icon name="search-outline"></ion-icon>
                    </label>
                </div>
    
                <div class="user">
                    <span>{{ user_role }}</span>
                </div>
            </div>

            <!-- ======================= PAGE ================== -->
            <div class="main-content" style="padding: 2em; text-align: center;">
                <h1>Besoin d'aide ?</h1>
                <p>Remplissez le formulaire ci-dessous pour nous contacter.</p><br>
                
                <form action="/aide" method="POST" class="contact-form" style="max-width:800px; margin:0 auto;">
                    <label for="titre">Titre du message :</label><br><br>
                    <input type="text" id="titre" name="titre" required>

                    <label for="messageEditable">Message :</label><br><br>
                    <textarea id="message" name="message" rows="10" cols="50" maxlength="500" required></textarea>
                                    
                    <button type="submit">Envoyer</button>
                </form>
            </div>
            <div id="notification" class="notification">✅ Votre formulaire a bien été envoyé ! Un professeur vous contactera bientôt.</div>
        </div>
    </div>

    <!-- ======= Scripts ======= -->
    <!-- Notification -->
    <script>
        document.querySelector('.contact-form').addEventListener("submit", function(event) {
            event.preventDefault(); // Empêche l'envoi immédiat du formulaire

            // Affiche la notification fluide
            let notif = document.getElementById("notification");
            notif.style.display = "block";

            // Disparition automatique après 5 secondes
            setTimeout(function() {
                notif.style.display = "none";
            }, 5000);

            // Soumettre le formulaire après 1 seconde
            setTimeout(() => {
                event.target.submit();
            }, 1000);
        });

        document.addEventListener("DOMContentLoaded", function () {
    const body = document.body;
    const recentOrdersContainer = document.getElementById('recentOrdersContainer');
    fetch('/get_theme', {
        method: 'GET',
        headers: {
            'Content-Type': 'application/json'
        }
    })
    .then(response => response.json())
    .then(data => {
        console.log(data);
        if (data.darkTheme === true) {
            body.classList.add("dark");
            localStorage.setItem("dark-theme", "enabled");
            if (recentOrdersContainer) {
                recentOrdersContainer.style.backgroundColor = "#333333";
            }
            body.style.color = "white"; // Set text color to white
        } else {
            body.classList.remove("dark");
            localStorage.setItem("dark-theme", "disabled");
            if (recentOrdersContainer) {
                recentOrdersContainer.style.backgroundColor = "";
            }
            body.style.color = ""; // Reset text color
        }
    });
});
    </script>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <script src="{{ url_for('static', filename='js/aide/main.js') }}"></script>
</body>
</html>
